(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{56:function(n,e,t){n.exports=t(77)},61:function(n,e,t){},77:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(23),i=t.n(o),u=(t(61),t(11)),l=t(12),c=t(14),d=t(13),m=t(15),s=t(5),f=t(54),b=t(7),p=t(10),h=t.n(p);function g(){var n=Object(s.a)(["\n  mutation deleteBook($id: ID!) {\n    deleteBook(id: $id) {\n      id\n    }\n  }\n"]);return g=function(){return n},n}function v(){var n=Object(s.a)(["\n  mutation addBook($name: String!, $genre: String!, $authorId: ID!) {\n    addBook(name: $name, genre: $genre, authorId: $authorId) {\n      name\n      id\n    }\n  }\n"]);return v=function(){return n},n}function x(){var n=Object(s.a)(["\n  query getBook($id: ID) {\n    book(id: $id) {\n      name\n      genre\n      id\n      author {\n        id\n        name\n        age\n        books {\n          name\n          id\n        }\n      }\n    }\n  }\n"]);return x=function(){return n},n}function E(){var n=Object(s.a)(["\n  {\n    books {\n      name\n      id\n    }\n  }\n"]);return E=function(){return n},n}function k(){var n=Object(s.a)(["\n  {\n    authors {\n      name\n      id\n    }\n  }\n"]);return k=function(){return n},n}var y=h()(k()),j=h()(E()),O=h()(x()),w=h()(v()),I=h()(g()),B=t(6),A=t(50);function F(){var n=Object(s.a)(["\n  background-color: transparent;\n  border: none;\n  width: 50px;\n  height: 50px;\n  color: darkslateblue;\n  cursor: pointer;\n"]);return F=function(){return n},n}function S(){var n=Object(s.a)(["\n  width: 90%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return S=function(){return n},n}function q(){var n=Object(s.a)(["\n  margin: 5px ",";\n"]);return q=function(){return n},n}function $(){var n=Object(s.a)(["\n  font-size: 1.5em;\n  border: 1px solid darkslateblue;\n  padding: 5px;\n  border-radius: 4px;\n  box-shadow: 1px 2px 5px rgba(0,0,0,.35);\n"]);return $=function(){return n},n}function C(){var n=Object(s.a)(["\n  width: 90%;\n"]);return C=function(){return n},n}function Q(){var n=Object(s.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  padding-left: 2em;\n\n  ul {\n    padding-left: 2em;\n  }\n"]);return Q=function(){return n},n}function z(){var n=Object(s.a)(["\n  background-color: palevioletred;\n  width: 40%;\n  height: 100vh;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  box-shadow: -3px -1px 7px rgba(0,0,0, .35);\n\n  h2 {\n    align-self: center;\n  }\n"]);return z=function(){return n},n}var D=B.a.div(z()),L=B.a.div(Q()),G=B.a.hr(C()),J=B.a.h3($()),M=B.a.p(q(),function(n){return n.margined?"20px":"0"}),_=B.a.div(S()),N=B.a.button(F()),P=function(n){var e=n.bookId,t=n.removeBookId;return a.a.createElement(D,null,a.a.createElement("h2",null,"Book Details"),e?a.a.createElement(b.Query,{query:O,variables:{id:e}},function(n){var e=n.loading,r=n.error,o=n.data;if(e)return a.a.createElement(M,{margined:!0},"Loading...");if(r)return a.a.createElement(M,{margined:!0},"Error ;( ");var i=o.book;return a.a.createElement(a.a.Fragment,null,a.a.createElement(G,null),a.a.createElement(L,null,a.a.createElement(_,null,a.a.createElement(J,null,i.name),a.a.createElement(b.Mutation,{mutation:I,update:function(n,e){e.data.deleteBook;var r=n.readQuery({query:j}).books;n.writeQuery({query:j,data:{books:r.filter(function(n){return n.id!==i.id})}}),t()}},function(n){return a.a.createElement(N,{title:"delete",onClick:function(){return n({variables:{id:i.id}})}},a.a.createElement(A.a,null))})),a.a.createElement(M,null,a.a.createElement("strong",null,"Genre:")," ",i.genre),a.a.createElement(M,null,a.a.createElement("strong",null,"Author:")," ",i.author.name),a.a.createElement(M,null,a.a.createElement("strong",null,"Other books:")),a.a.createElement("ul",null,i.author.books.map(function(n){var e=n.name,t=n.id;return a.a.createElement("li",{key:t},e)}))))}):a.a.createElement(M,{margined:!0},"No book selected..."))};function R(){var n=Object(s.a)(["\n  padding: 5px;\n  border: 1px solid ",";\n  color: ",";\n  box-shadow: 1px 2px 5px rgba(0,0,0,.35);\n  border-radius: 4px;\n  margin: 4px 5px;\n  text-align: center;\n\n  :hover {\n    cursor: pointer;\n  }\n"]);return R=function(){return n},n}function H(){var n=Object(s.a)(["\n  list-style-type: none;\n  margin-left: 0;\n  margin-bottom: 1em;\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n"]);return H=function(){return n},n}function K(){var n=Object(s.a)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  width: 60%;\n  height: 100%;\n  padding-left: 1em;\n  padding-right: .2em;\n\n  h2 {\n    align-self: center;\n  }\n"]);return K=function(){return n},n}function T(){var n=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n"]);return T=function(){return n},n}var U=B.a.div(T()),V=B.a.div(K()),W=B.a.ul(H()),X=B.a.li(R(),function(n){return n.optimistic?"#AAAAAA":"palevioletred"},function(n){return n.optimistic?"#AAAAAA":"#FFFFFF"}),Y=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,n))).state={selected:null},t}return Object(m.a)(e,n),Object(l.a)(e,[{key:"render",value:function(){var n=this;return a.a.createElement(U,null,a.a.createElement(V,null,a.a.createElement("h2",null,"Books List"),a.a.createElement(W,null,a.a.createElement(b.Query,{query:j},function(e){var t=e.loading,r=e.error,o=e.data;return t?a.a.createElement("div",null,"Loading Books..."):r?a.a.createElement("div",null,"Error ;( "):o.books.map(function(e){var t=e.name,r=e.id;return a.a.createElement(X,{key:r,optimistic:"number"===typeof r,onClick:function(){return n.setState({selected:r})}},t)})}))),a.a.createElement(P,{bookId:this.state.selected,removeBookId:function(){return n.setState({selected:null})}}))}}]),e}(r.Component);function Z(){var n=Object(s.a)(["\n  border-radius: 50%;\n  height: 40px;\n  width: 40px;\n  border: none;\n  box-shadow: 1px 2px 1px rgba(0,0,0,0.34);\n  font-size: 2em;\n  background-color: palevioletred;\n  color: white;\n"]);return Z=function(){return n},n}function nn(){var n=Object(s.a)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n  margin-bottom: 5px;\n  input, select {\n    width: 50%;\n    margin-left: 1em;\n  }\n\n"]);return nn=function(){return n},n}function en(){var n=Object(s.a)(["\n  box-sizing: border-box;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 350px;\n  padding: 10px 1em;\n  background-color: #8A7FCD;\n  color: black;\n"]);return en=function(){return n},n}var tn=B.a.form(en()),rn=B.a.div(nn()),an=B.a.button(Z()),on=function(n){function e(n){var t;return Object(u.a)(this,e),(t=Object(c.a)(this,Object(d.a)(e).call(this,n))).state={name:"",genre:"",authorId:""},t}return Object(m.a)(e,n),Object(l.a)(e,[{key:"onSubmitForm",value:function(n){n.preventDefault();var e=this.state,t=e.name,r=e.genre,a=e.authorId;this.props.mutate({variables:{name:t,genre:r,authorId:a},optimisticResponse:{addBook:{__typename:"Book",name:t,genre:r,authorId:a,id:1e4*Math.random()}},update:function(n,e){var t=e.data.addBook,r=n.readQuery({query:j});r.books.push(t),n.writeQuery({query:j,data:r})}}),this.setState({name:"",genre:"",authorId:""})}},{key:"render",value:function(){var n=this,e=this.state,t=e.name,r=e.genre;return a.a.createElement(tn,{id:"addBook",onSubmit:this.onSubmitForm.bind(this)},a.a.createElement(rn,null,a.a.createElement("label",{htmlFor:"name"},"Book name:"),a.a.createElement("input",{name:"name",type:"text",value:t,onChange:function(e){return n.setState({name:e.target.value})}})),a.a.createElement(rn,null,a.a.createElement("label",{htmlFor:"genre"},"Genre:"),a.a.createElement("input",{name:"genre",type:"text",value:r,onChange:function(e){return n.setState({genre:e.target.value})}})),a.a.createElement(rn,null,a.a.createElement("label",{htmlFor:"author"},"Author:"),a.a.createElement("select",{name:"author",value:this.state.authorId,onChange:function(e){return n.setState({authorId:e.target.value})}},a.a.createElement("option",{value:""},"Select author"),a.a.createElement(b.Query,{query:y},function(n){var e=n.loading,t=n.error,r=n.data;return e?a.a.createElement("option",null,"Loading..."):t?a.a.createElement("option",null,"Error ;( "):r.authors.map(function(n){var e=n.name,t=n.id;return a.a.createElement("option",{key:t,value:t},e)})}))),a.a.createElement(an,null,"+"))}}]),e}(r.Component),un=Object(b.graphql)(w)(on);function ln(){var n=Object(s.a)(["\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n"]);return ln=function(){return n},n}var cn=new f.a({uri:"/graphql"}),dn=B.a.div(ln()),mn=function(n){function e(){return Object(u.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,n),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement(b.ApolloProvider,{client:cn},a.a.createElement(dn,null,a.a.createElement(Y,null),a.a.createElement(un,null)))}}]),e}(r.Component);i.a.render(a.a.createElement(mn,null),document.getElementById("root"))}},[[56,2,1]]]);
//# sourceMappingURL=main.c491f0a6.chunk.js.map